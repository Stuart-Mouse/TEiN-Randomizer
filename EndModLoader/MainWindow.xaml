<Window x:Class="TEiNRandomizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TEiNRandomizer"
        mc:Ignorable="d"
        Title="{Binding WindowTitle}" Height="780" Width="525" MinHeight="300" MinWidth="520" MaxWidth="520"
        Closing="Window_Closing" >
    <Grid Margin="10,10,10,10">
        <Grid.RowDefinitions>
            <RowDefinition Height="12" />
            <RowDefinition Height="20" />
            <RowDefinition MinHeight="100"/>
            <RowDefinition Height="20" />
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="Game Path" Height="12" VerticalAlignment="Top" FontSize="9" FontFamily="Segoe UI Semibold"/>
        <Grid Grid.Row="1" Height="20" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Name="PathText" Text="{Binding EndIsNighPath}" Style="{StaticResource PathText}" Grid.Column="0" />
            <Button Name="FolderButton" Style="{StaticResource FolderSelectButton}" Grid.Column="1" Click="FolderButton_Click" />
        </Grid>
        <Grid Grid.Row="2" VerticalAlignment="Top" Margin="0,10,0,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="5*"/>
                <ColumnDefinition Width="4*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0" HorizontalAlignment="Left" Width="265">
                <Grid.RowDefinitions>
                    <RowDefinition Height="20" />
                    <RowDefinition MinHeight="100" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Text="Level Pools" Style="{StaticResource TitleText}" Width="70" VerticalAlignment="Top" TextAlignment="Center" FontSize="13" FontFamily="Segoe UI Semibold"/>
                <ListBox Grid.Row="1" Name="PoolList" 
                ItemTemplate="{StaticResource PoolListTemplate}" 
                ItemsSource="{Binding Pools}"
                Style="{StaticResource PoolListStyle}" />
            </Grid>
            <Grid Grid.Column="1" Width="210" Height="Auto" HorizontalAlignment="Right">
                <Grid.RowDefinitions>
                    <RowDefinition Height="20" />
                    <RowDefinition MinHeight="120" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Text="Settings" Style="{StaticResource TitleText}" Width="70" Height="auto" VerticalAlignment="Top" TextAlignment="Center" FontFamily="Segoe UI Semibold" FontSize="13"/>
                <ListBox Grid.Row="1" Name="SettingsList" Padding="5" Style="{StaticResource FreezeSettings}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="120"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Seed: "/>
                        <TextBox Grid.Column="1" Name="SeedTextBox">
                            <TextBox.Text>
                                <Binding Path="GameSeed" UpdateSourceTrigger="PropertyChanged"/>
                            </TextBox.Text>
                        </TextBox>
                    </Grid>
                    <Button Name="SeedButton" Padding="5,0" Content="Get New Seed"  Click="SeedButton_Click" Margin="0,0,0,0" Height="20"/>
                    <Separator Margin="0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="120"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Levels: "/>
                        <TextBox Grid.Column="1" Name="NumLevelsTextBox">
                            <TextBox.Text>
                                <Binding Path="RSettings.NumLevels" UpdateSourceTrigger="PropertyChanged"/>
                            </TextBox.Text>
                        </TextBox>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="120"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Areas: "/>
                        <TextBox Grid.Column="1" Name="NumAreasTextBox">
                            <TextBox.Text>
                                <Binding Path="RSettings.NumAreas" UpdateSourceTrigger="PropertyChanged"/>
                            </TextBox.Text>
                        </TextBox>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Area Type: "/>
                        <TextBox Grid.Column="1" Name="AreaTypeTextBox" Margin="0,0,0,0">
                            <TextBox.Text>
                                <Binding Path="RSettings.AreaType" UpdateSourceTrigger="PropertyChanged"/>
                            </TextBox.Text>
                        </TextBox>
                    </Grid>
                    
                    <CheckBox Content="Use Default Music" IsChecked="{Binding RSettings.UseDefaultMusic}" />
                    <CheckBox Content="Use Default Palettes" IsChecked="{Binding RSettings.UseDefaultPalettes}" />
                    <CheckBox Content="Randomize Palette Per Level" IsChecked="{Binding RSettings.PalettePerLevel}" />
                    <CheckBox Content="Randomize Music Per Level" IsChecked="{Binding RSettings.MusicPerLevel}" />
                    <CheckBox Content="Randomize Shaders" IsChecked="{Binding RSettings.DoShaders}" />
                    <CheckBox Content="Randomize Particles" IsChecked="{Binding RSettings.DoParticles}" />
                    <CheckBox Content="Randomize Overlays" IsChecked="{Binding RSettings.DoOverlays}" />
                    <CheckBox Content="Randomize Tile Graphics" IsChecked="{Binding RSettings.DoTileGraphics}" />
                    <TextBlock Text="Randomize Art Alts: " />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="30"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0"  Name="AltDownButton" Padding="5,0" Content="-" Width="25" Click="AltLevelDec" Margin="0,0" />
                        <TextBox Grid.Column="1" Name="AltLevelTextBox" Width="70">
                            <TextBox.Text>
                                <Binding Path="RSettings.AltLevel" UpdateSourceTrigger="PropertyChanged"/>
                            </TextBox.Text>
                        </TextBox>
                        <Button Grid.Column="2"  Name="AltUpButton" Padding="5,0" Content="+" Width="25" Click="AltLevelInc" Margin="0,0" />
                    </Grid>
                    <CheckBox Content="Randomize NPCs" IsChecked="{Binding RSettings.DoNPCs}" />
                    <CheckBox Content="Can Apply Nevermore Tilt" IsChecked="{Binding RSettings.DoNevermoreTilt}" />
                    <CheckBox Content="Can Apply Exodus Wobble" IsChecked="{Binding RSettings.DoExodusWobble}" />
                    <CheckBox Content="One Tileset Per Area" IsChecked="{Binding RSettings.UseCommonTileset}" />
                    <Separator Margin="0,5"/>
                    <TextBlock Grid.Column="0" Text="Tilesets Options: "/>
                    <TextBox Grid.Column="1" Name="TilesetBox" Height="auto" Width="160">
                        <TextBox.Text>
                            <Binding Path="RSettings.AttachToTS" UpdateSourceTrigger="PropertyChanged"/>
                        </TextBox.Text>
                    </TextBox>
                    <Separator Margin="0,5"/>
                </ListBox>
                <Button Grid.Row="2" Name="SaveSettings" Padding="5,0" Content="Save Settings" Margin="10,5" Click="SaveSettings_Click" Height="20"/>
                <Button Grid.Row="3" Name="AdvancedSettingsButton" Padding="5,0" Content="Advanced Settings" Margin="10,5" Click="AdvancedSettings_Click" Height="20"/>
                <ListBox Grid.Row="4" Name="AdvancedSettingsList" Style="{StaticResource AdvancedSettings}" Padding="5">
                    <!--<TextBlock Name="NumShufflesTextBlock" Text="Number of Shuffles: " PreviewMouseDown="NoClick" />
                    <TextBox Name="NumShufflesTextBox" Width="150" >
                        <TextBox.Text>
                            <Binding Path="RSettings.NumShuffles" UpdateSourceTrigger="PropertyChanged"/>
                        </TextBox.Text>
                    </TextBox>-->
                    <TextBlock Name="CacheTextBlock" Text="Cache Previous Runs: "/>
                    <TextBlock Name="CacheTextBlock2" Text="(may reduce level repetition)"/>
                    <TextBox Name="CacheTextBox" Width="150" >
                        <TextBox.Text>
                            <Binding Path="RSettings.CacheRuns" UpdateSourceTrigger="PropertyChanged"/>
                        </TextBox.Text>
                    </TextBox>
                    <TextBlock Text="Level Repeat Tolerance: "/>
                    <TextBox Name="RepeatTextBox" Width="150" >
                        <TextBox.Text>
                            <Binding Path="RSettings.RepeatTolerance" UpdateSourceTrigger="PropertyChanged"/>
                        </TextBox.Text>
                    </TextBox>
                    <Button Name="ClearCacheButton" Padding="5,0" Content="Clear Level Cache" Click="ClearCache" Margin="0,0,0,0" Height="20" />
                    <Button Name="AnalysisButton" Padding="5,0" Content="Run Randomness Analysis" MouseRightButtonDown="AnalysisButton_Click" Margin="0,0,0,0" Height="20" />
                </ListBox>
            </Grid>
        </Grid>
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="120"/>
            </Grid.ColumnDefinitions>
            <Button Grid.Column="0" Name="PlayButton" Style="{StaticResource PlayModButton}" Click="PlayButton_Click" Margin="0,0,0,0" />
            <Button Grid.Column="1" Name="RefreshButton" Content="Refresh" Style="{StaticResource RefreshButton}" Click="RefreshButton_Click" Margin="0,0,0,0" />
        </Grid>
        
    </Grid>
</Window>
